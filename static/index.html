    {% extends "base.html" %}

    {% block meta %}
  <meta name="description"
          content="app, web app, responsive, responsive layout, admin, admin panel, admin dashboard, flat, flat ui, ui kit, AngularJS, ui route, charts, widgets, components"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
{% endblock %}

    {% block content %}
     <div class="app-content-body fade-in-up ">
            <div class="hbox hbox-auto-xs hbox-auto-sm">
                <div class="col ">
                    <div class="wrapper-gmd ">
                        <div class="row m-t" style="overflow: hidden;">

                            <div class="col-xs-6 col-no-padding">
                                <div class="photo-section main">
                                    {% if index_blogs.0.blog.cover %}
                                       <img src="{{ index_blogs.0.blog.cover.url }}" style="width:410px;height: 400px" class="img-thumbnail img_main"/>
                                     {% else %}
                                    <img src="/assets/source/main_1.jpg" alt="..." class="img-thumbnail img_main"/>
                                    {% endif %}

                                    <img src="/assets/source/mask22.png" alt="" class="mask">
                                    <a href="/blog/{{ index_blogs.0.blog.pk }}" target="_blank" class="hover-content">

                                        <div class="photo-title">
                                            <h2 class="font-size-lg">
                                                {{ index_blogs.0.blog.title }}
                                            </h2>
                                            <p class="font-size-sm"> {{ index_blogs.0.blog.author }}</p>
                                        </div>
                                    </a>


                                </div>
                            </div>
                            <div class="col-xs-6 col-no-padding">
                                <div class="photo-section second">
                                    <!--img src="/assets/source/main_2.jpg" alt="..." class="img-thumbnail img_second"/-->
                                      {% if index_blogs.1.blog.cover %}
                                       <img src="{{ index_blogs.1.blog.cover.url }}" style="width:410px;height: 200px" class="img-thumbnail img_second"/>
                                     {% else %}
                                    <img src="/assets/source/main_2.jpg" alt="..." class="img-thumbnail img_second"/>
                                    {% endif %}
                                    <img src="/assets/source/mask22.png" alt="" class="mask">


                                    <a href="/blog/{{ index_blogs.1.blog.pk }}" target="_blank" class="hover-content">

                                        <div class="photo-title">
                                            <h4 class="font-size-gmd">
                                                {{ index_blogs.1.blog.title }}
                                            </h4>
                                            <p class="font-size-xs"> {{ index_blogs.1.blog.author }}</p>
                                        </div>
                                    </a>
                                </div>
                                <div class="photo-section third">
                                    <!--img src="/assets/source/main_3.jpg" alt="..." class="img-thumbnail img_third"/-->
                                     {% if index_blogs.2.blog.cover %}
                                       <img src="{{ index_blogs.2.blog.cover.url }}" style="width:410px;height: 200px" class="img-thumbnail img_third"/>
                                     {% else %}
                                    <img src="/assets/source/main_3.jpg" alt="..." class="img-thumbnail img_third"/>
                                    {% endif %}

                                    <a href="/blog/{{ index_blogs.2.blog.pk }}" target="_blank" class="hover-content">

                                        <div class="photo-title">
                                            <h4 class="font-size-gmd">
                                                {{ index_blogs.2.blog.title }}
                                            </h4>
                                            <p class="font-size-xs"> {{ index_blogs.1.blog.author }}</p>
                                        </div>
                                    </a>
                                </div>
                            </div>

                        </div>
                        <div class="row m-t">
                            <div class="main-content">
                                <div class="tab-container">
                                    <ul class="nav nav-tabs" role="tablist">
                                        <li class="active"><a href="#tab1" data-toggle="tab">最新发布 <span
                                                class="badge badge-sm m-l-xs"></span></a></li>


                                    </ul>
                                    <div class="tab-content">
                                        <div class="tab-pane active" id="tab1">
                                            <div class="articles">
                                                {% for post in blogs %}
                                                 <article class="posts post-1 cf">

                                                    <div class="info cf">
                                                        <div class="topic left">
                                                            <span><a href="#" class="breaking">{{ post.category }} </a> / column
                                                            </span>
                                                        </div>
                                                        <div class="postmeta left"><a href=""
                                                                                       class="uname user_sinCera">{{ post.author }}</a>
                                                             <span class="timeago" title=" "></span></div>
                                                    </div>
                                                    <div class="left left-col">
                                                        <div class="image feature-img thumb-180"><a href="/blog/{{ post.pk }}"
                                                                                                    class="thumbnail"><img style="width:170px;height:113px"
                                                                alt="Blank" class="image lazyload loaded"
                                                                {% if post.cover %}
                                                                src="{{ post.cover.url }}">
                                                                {% else %}
                                                                src="http://a.36krcnd.com/photo/2015/f6b83d7079469dbadeb25ef9f718f9c2.jpg!slider">
                                                               {% endif %}
                                                        </a>
                                                        </div>
                                                    </div>
                                                    <div class="right-col">
                                                        <h1><a href="/blog/{{ post.pk }}">{{ post.title }}</a></h1>
                                                        <br>
                                                        {% autoescape off %}
                                                        <p>{{ post.content|striptags|slice:"50" }}</p>
                                                        {% endautoescape %}
                                                    </div>

                                                </article>

                                                {% endfor %}




                                            </div>


                                        </div>


                                    </div>
                                </div>
                                <div class="text-center m-t-xs m-b-xs">
                                    <ul class="pagination pagination-md">
                            {% if blogs.has_previous %}
                            <li><a href="?page={{ blogs.previous_page_number }}"><i class="fa fa-chevron-left"></i></a></li>
                            {% endif %}

                            <li class="active"><a href="">Page {{ blogs.number }} of {{ blogs.paginator.num_pages }}</a></li>
                            <!--li><a href="">2</a></li>
                            <li><a href="">3</a></li>
                            <li><a href="">4</a></li>
                            <li><a href="">5</a></li-->



                            {% if blogs.has_next %}
                            <li><a href="?page={{ blogs.next_page_number }}"><i class="fa fa-chevron-right"></i></a></li>
                            {% endif %}
                                    </ul>
                                </div>

                            </div>
                            <div class="tag-aside">
                                <button class="btn m-b-xs w-xs btn-info btn-rounded">TAGS</button>
                                <ul class="list-group">
                                    {% for tag in hottags %}
                                    <li class="list-group-item">
                                        <a href="/tag/{{ tag.tag.pk }}">
                                            <b class="badge bg-info pull-right">{{ tag.tag.blog_set.all|length }}</b>
                                            {{ tag.tag.name }}
                                        </a>
                                    </li>
                                    {% endfor %}
                                </ul>

                                <section class="aside-social aside-fixed" id="qRcode">

                                    <div class="image text-center "><img alt="Qrcode" src="/assets/source/2.jpg"></div>
                                    <p class="m-t-md padder" style="width: 200px;">微信公众平台：搜索 “collegedaily”
                                        或扫描下面的二维码</p>
                                </section>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col w-lg lter padder-v-30 bg-auto">
                    <div class="padder-xs">
                        <div class="panel panel-default">
                            <a href="{{ ad_1.url }}"> <img src="{{ ad_1.cover.url }}" alt="..." class="img-thumbnail "></a>
                        </div>
                        <button class="btn m-b-xs w-xs btn-info btn-rounded">热门文章</button>

                        <div class="panel b-a">

                            <ul class="list-group">
                                 {% for hot in headlines|slice:":5" %}
                                <li class="list-group-item">
                                    <a href="/blog/{{hot.blog.pk}}/" class="thumb-article-md m-r">
                                        {% if  hot.blog.cover%}
                                        <img src="{{ hot.blog.cover.url }}" class="r r-2x">
                                        {% else %}
                                         <img src="/assets/img/a5.jpg" class="r r-2x">
                                        {% endif %}
                                    </a>

                                    <div class="article-des">
                                        <p class=""><a href="" class="text m-xs">{{ hot.blog.title}}</a></p>

                                        <p>
                                            <a class="text-muted m-xs"><i class="fa fa-fw fa-clock-o"></i>{{ hot.blog.date}}
                                            </a>
                                            <a class="text-muted  right"><i class="fa fa-fw fa-comment-o"></i>{{ hot.blog.hotness}}</a>
                                        </p>
                                    </div>
                                </li>
                                {% endfor %}

                            </ul>
                            <h5 class="font-thin padder text-right"><a href="/category/">显示更多</a></h5>
                        </div>

                        <!--button class="btn m-b-xs w-xs btn-info btn-rounded">最新评论</button-->

                        <div class="b-t">
                            {% for hot in hots|slice:":5" %}
                            <div class="m-l-xs m-t-md">
                                <div class="m-t-sm m-l-lg m-b-xs">
                                    <span href="" class="text m-md">{{ hot.author.username }}</span>
                                    <span href="" class="text-muted text-base"><i>{{ hot.time }}</i></span>
                                </div>
                                <a class="pull-left thumb-sm avatar">
                                    <img src="/media/{{ hot.author.head }}" alt="...">
                                </a>

                                <div class="m-l-xxl panel b-a">

                                    <div class="panel-heading pos-rlt">
                                        <span class="arrow left pull-up"></span>
                                        <a href="">{{ hot.content }}</a>

                                        <p class="text">评论于</p>
                                        <a href="/blog/{{hot.blog_set.all.0.pk}}/" class="text-info m-l-n-sm">{{hot.blog_set.all.0.title | truncatechars:12}}</a>
                                    </div>
                                </div>
                            </div>
                            {% endfor %}



                        </div>

                    </div>
                </div>
            </div>
        </div>

     <script>
    $(function ($) {
        $(document).ready(function () {
            //enabling stickUp on the '.navbar-wrapper' class
//            $('.navbar-wrapper').stickUp();
            $('#qRcode').stickUp({
                marginTop: 'auto'
            });

        });
    });

</script>
<script type="text/javascript">
    /* ==== slider nameSpace ==== */
    var slider = function () {
        /* ==== private methods ==== */
        function getElementsByClass(object, tag, className) {
            var o = object.getElementsByTagName(tag);
            for (var i = 0, n = o.length, ret = []; i < n; i++) {
                if (o[i].className == className) ret.push(o[i]);
            }
            if (ret.length == 1) ret = ret[0];
            return ret;
        }

        function setOpacity(obj, o) {
            if (obj.filters) obj.filters.alpha.opacity = Math.round(o);
            else obj.style.opacity = o / 100;
        }

        /* ==== Slider Constructor ==== */
        function Slider(oCont, speed, iW, iH, oP) {
            this.slides = [];
            this.over = false;
            this.S = this.S0 = speed;
            this.iW = iW;
            this.iH = iH;
            this.oP = oP;
            this.oc = document.getElementById(oCont);
            this.frm = getElementsByClass(this.oc, 'div', 'slide');
            this.NF = this.frm.length;
            this.resize();
            for (var i = 0; i < this.NF; i++) {
                this.slides[i] = new Slide(this, i);
            }
            this.oc.parent = this;
            this.view = this.slides[0];
            this.Z = this.mx;
            /* ==== on mouse out event ==== */
            this.oc.onmouseout = function () {
                this.parent.mouseout();
                return false;
            }
        }

        Slider.prototype = {
            /* ==== animation loop ==== */
            run: function () {
                this.Z += this.over ? (this.mn - this.Z) * .5 : (this.mx - this.Z) * .5;
                this.view.calc();
                var i = this.NF;
                while (i--) this.slides[i].move();
            },
            /* ==== resize  ==== */
            resize: function () {
                this.wh = this.oc.clientWidth;
                this.ht = this.oc.clientHeight;
                this.wr = this.wh * this.iW;
                this.r = this.ht / this.wr;
                this.mx = this.wh / this.NF;
                this.mn = (this.wh * (1 - this.iW)) / (this.NF - 1);
            },
            /* ==== rest  ==== */
            mouseout: function () {
                this.over = false;
                setOpacity(this.view.img, this.oP);
            }
        }
        /* ==== Slide Constructor ==== */
        Slide = function (parent, N) {
            this.parent = parent;
            this.N = N;
            this.x0 = this.x1 = N * parent.mx;
            this.v = 0;
            this.loaded = false;
            this.cpt = 0;
            this.start = new Date();
            this.obj = parent.frm[N];
            this.txt = getElementsByClass(this.obj, 'div', 'text');
            this.img = getElementsByClass(this.obj, 'img', 'diapo');
            this.bkg = document.createElement('div');
            this.bkg.className = 'backgroundText';
            this.obj.insertBefore(this.bkg, this.txt);
            if (N == 0) this.obj.style.borderLeft = 'none';
            this.obj.style.left = Math.floor(this.x0) + 'px';
            setOpacity(this.img, parent.oP);
            /* ==== mouse events ==== */
            this.obj.parent = this;
            this.obj.onmouseover = function () {
                this.parent.over();
                return false;
            }
        }
        Slide.prototype = {
            /* ==== target positions ==== */
            calc: function () {
                var that = this.parent;
                // left slides
                for (var i = 0; i <= this.N; i++) {
                    that.slides[i].x1 = i * that.Z;
                }
                // right slides
                for (var i = this.N + 1; i < that.NF; i++) {
                    that.slides[i].x1 = that.wh - (that.NF - i) * that.Z;
                }
            },
            /* ==== HTML animation : move slides ==== */
            move: function () {
                var that = this.parent;
                var s = (this.x1 - this.x0) / that.S;
                /* ==== lateral slide ==== */
                if (this.N && Math.abs(s) > .5) {
                    this.obj.style.left = Math.floor(this.x0 += s) + 'px';
                }
                /* ==== vertical text ==== */
                var v = (this.N < that.NF - 1) ? that.slides[this.N + 1].x0 - this.x0 : that.wh - this.x0;
                if (Math.abs(v - this.v) > .5) {
                    this.bkg.style.top = this.txt.style.top = '200px';
//                            Math.floor(2 + that.ht - (v - that.Z) * that.iH * that.r) + 'px';
                    this.v = v;
                    this.cpt++;
                } else {
                    if (!this.pro) {
                        /* ==== adjust speed ==== */
                        this.pro = true;
                        var tps = new Date() - this.start;
                        if (this.cpt > 1) {
                            that.S = Math.max(2, (28 / (tps / this.cpt)) * that.S0);
                        }
                    }
                }
                if (!this.loaded) {
                    if (this.img.complete) {
                        this.img.style.visibility = 'visible';
                        this.loaded = true;
                    }
                }
            },
            /* ==== light ==== */
            over: function () {
                this.parent.resize();
                this.parent.over = true;
                setOpacity(this.parent.view.img, this.parent.oP);
                this.parent.view = this;
                this.start = new Date();
                this.cpt = 0;
                this.pro = false;
                this.calc();
                setOpacity(this.img, 100);
            }
        }
        /* ==== public method - script initialization ==== */
        return {
            init: function () {
                // create instances of sliders here
                // parameters : HTMLcontainer name, speed (2 fast - 20 slow), Horizontal ratio, vertical text ratio, opacity
                this.s1 = new Slider("slider", 12, 1.84 / 3, 1 / 3.2, 100);
                setInterval("slider.s1.run();", 16);
            }
        }
    }();

    slider.init();

</script>
    {% endblock %}